{% ckan_extends %}

{% import 'macros/form.html' as form %}

{% block page_primary_action %}
  {% if h.check_access('package_create', {'owner_org': group_dict.id}) %}
    {% snippet 'snippets/add_dataset.html', group=group_dict.id %}

    {% set action = h.url_for('ogdch_organization.xml_upload', name=group_dict.name) %}
    <form id="dataset-import" class="form-inline" method="post" action="{{ action }}" enctype="multipart/form-data">
      {{ h.csrf_input() }}
      {{ form.file_upload(
        {'file_url': ''},
        {'file_url': ''},
        is_upload_enabled=h.uploads_enabled(),
        is_url=False,
        is_upload=False,
        upload_label=_('Add datasets from XML')
      ) }}
      <div class="form-actions">
        <button class="btn btn-default" id="dataset-import-button" type="submit">
          {{ _('Submit') }}
        </button>
      </div>
    </form>

  {% endif %}
{% endblock %}

{% block content_primary_nav %}
  {{ h.build_nav_icon(group_type + '.edit', _('Edit'), id=group_dict.name, icon='pencil') }}
  {{ h.build_nav_icon(group_type + '.bulk_process', h.humanize_entity_type('package', dataset_type, 'content tab') or _('Datasets'), id=group_dict.name, icon='sitemap') }}
  {% if h.check_access('group_edit_permissions', {'id': group_dict.id, 'is_organization': true}) %}
    {{ h.build_nav_icon(group_type + '.manage_members', _('Members'), id=group_dict.name, icon='users') }}
  {% endif %}
{% endblock %}
